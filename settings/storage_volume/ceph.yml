--- !extends:common/shared.yml

nodes:
  controller:
    storage_volume:
      variant:
        vendor_name: "Open Source"
        storage_protocol: ceph
        share: !lookup provisioner.storage.shares.ceph
        shares_file: "/etc/cinder/ceph.share"

      config:
        cinder:
          "6.0":
            DEFAULT:
              volume_driver: "cinder.volume.drivers.rbd.RBDDriver"
              rbd_user: "automation-volumes"
              rbd_pool: "automation-volumes"
              rbd_ceph_conf: "/etc/ceph/ceph.conf"
              rbd_flatten_volume_from_snapshot: "false"
              rbd_max_clone_depth: "5"
              glance_api_version: "2"
              backup_driver: "cinder.backup.drivers.ceph"
              backup_ceph_conf: "/etc/ceph/ceph.conf"
              backup_ceph_user: "automation-backups"
              backup_ceph_pool: "automation-backups"
              backup_ceph_chunk_size: "134217728"
              backup_ceph_stripe_unit: "0"
              backup_ceph_stripe_count: "0"
              restore_discard_excess_bytes: "true"
